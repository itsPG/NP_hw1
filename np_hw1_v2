#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <unistd.h>
#include <errno.h>
#include <wait.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <ctype.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <map>
#include <signal.h>
#define ROOT_DIC "/home/PG/PG/"
#define DEBUG 0
#define PIPEMAX 100000
string i2s(int q)
{
	ostringstream sout;
	sout << q;
	return sout.str();
}
class PG_pipe
{
public:
	
	map<string, int> pipe_read, pipe_write;
	map<string, int>::iterator iter;
	void apply(string q)
	{
		iter = pipe_read.find(q);
		if (iter != pipe_read.end())
		{
			dup2(iter->second,0);
		}
		iter = pipe_write.find(q);
		if (iter != pipe_write.end())
		{
			dup2(iter->second,1);
		}
	}
	void connect(string from, string to)
	{
		int fd[2];
		pipe(fd);
		pipe_read[from] = fd[0];
		pipe_write[from] = fd[1];
	}
	
	
}
int main()
{
	int pid;
	PG_pipe Tio;
	Tio.connect("a","b")
	if (pid = fork())
	{
		
		cerr << "parent" << endl;
		Tio.apply("a");
		cout << "123" << endl;
		int q;
		while(cin >> q);
	}
	else 
	{
		cerr << "child" << endl;
		Tio.apply("b");
		int q;
		cin >> q;
		cout << "c" << q << endl;
		
	}
	
	
}
